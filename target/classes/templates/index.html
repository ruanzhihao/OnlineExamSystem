<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>在线考试平台登录页面</title>
<link th:href="@{/Ch/login.css}" rel="stylesheet" rev="stylesheet" type="text/css" media="all" />
<script type="text/javascript" th:src="@{/js/jQuery1.7.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery-1.8.2.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery1.42.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.SuperSlide.js}"></script>
<script type="text/javascript" th:src="@{/js/Validform_v5.3.2_min.js}"></script>
  <script type='text/javascript'>
      $(function () {
          $("#validateCode").keyup(function(){
              checkLoginValidateCode($(this).val());
          });
      });
      function uploadLoginValidateCode() {
          $("#loginValidateCode").attr("src","/loginValidateCode?random="+new Date().getMilliseconds());
      }
      function checkLoginValidateCode(validateCode) {
          var error = $("#p");
          if(validateCode != null && validateCode != ""){
              $.ajax({
                  type: "POST",
                  async:false,
                  url: "/checkLoginValidateCode?validateCode="+validateCode,
                  success : function(json) {
                      if(json != null && json.code == 200 && json.status != null) {
                          if (json.status == true) {
                              error.html("恭喜你验证码，正确！！！！！");
                          } else if(json.status == false){
                              error.html("验证码错误，请重新输入");
                          }else{
                              error.html("验证码过期，请重新输入");
                              uploadLoginValidateCode();
                          }
                      }
                      return false;
                  },
                  error:function(XMLHttpRequest,textStatus,errorThrown){
                      alert("服务器错误！状态码："+XMLHttpRequest.status);
                      // 状态
                      console.log(XMLHttpRequest.readyState);
                      // 错误信息
                      console.log(textStatus);
                      return false;
                  }
              });
          }else{
              error.html("请输入验证码！");
          }
      }
      
    function checkLogin(){

    }
  </script>
</head>
<body>
<div id="tab">
  <ul class="tab_menu">
    <li class="selected">学生登录</li>
    <li>教师登录</li>
    <li>管理员登录</li>
  </ul>
  <div class="tab_box"> 
    <!-- 学生登录开始 -->
    <div>
      <div class="stu_error_box"></div>
      <form action="loginPage" method="post"  class="stu_login_error">
        <div id="stuname">
          <label>学&nbsp;&nbsp;&nbsp;号：</label>
          <input type="text" id="stu_username_hide" name="uid" />
          <!--ajaxurl="demo/valid.jsp"--> 
        </div>
        <div id="stupwd">
          <label>密&nbsp;&nbsp;&nbsp;码：</label>
          <input type="password" id="stu_password_hide" name="password" />
        </div>
        <div id="code">
          <label>验证码：</label>
          <!--<input type="text" id="stu_code_hide" name="code" />-->
          <input type="text" id="validateCode" name="validateCode" />
          <img  title="点击更换" alt="验证码占位图" id="loginValidateCode" height="40" width="150"  style="cursor: pointer;" src="/loginValidateCode" onclick="uploadLoginValidateCode();"/> </div>
        <p  id="p" style="color: red"></p>
        <div id="remember">
          <input type="checkbox" name="remember">
          <label>记住密码</label>
        </div>
        <div id="login">
          <button type="submit" onclick="checkLogin()">登录</button>
        </div>
      </form>
    </div>

  </div>
</div>

<div class="screenbg">
  <ul>
    <li><a href="javascript:;"><img th:src="@{/images/1.jpg}"></a></li>
  </ul>
</div>
</body>
</html>
